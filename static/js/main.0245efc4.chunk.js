(this["webpackJsonpgoit-react-hw-09-phonebook"]=this["webpackJsonpgoit-react-hw-09-phonebook"]||[]).push([[0],{13:function(t,e,n){"use strict";n.d(e,"b",(function(){return f})),n.d(e,"a",(function(){return k})),n.d(e,"c",(function(){return y}));var r,c,a,o=n(5),u=n(3),s=n(8),i=n(4),l={name:null,email:null},b=Object(i.c)(l,(r={},Object(u.a)(r,o.a.registerSuccess,(function(t,e){return e.payload.user})),Object(u.a)(r,o.a.loginSuccess,(function(t,e){return e.payload.user})),Object(u.a)(r,o.a.logoutSuccess,(function(){return l})),Object(u.a)(r,o.a.getCurrentUserSuccess,(function(t,e){return e.payload})),r)),j=Object(i.c)(null,(c={},Object(u.a)(c,o.a.registerSuccess,(function(t,e){return e.payload.token})),Object(u.a)(c,o.a.loginSuccess,(function(t,e){return e.payload.token})),Object(u.a)(c,o.a.logoutSuccess,(function(){return null})),c)),d=Object(i.c)(!1,(a={},Object(u.a)(a,o.a.registerSuccess,(function(){return!0})),Object(u.a)(a,o.a.loginSuccess,(function(){return!0})),Object(u.a)(a,o.a.getCurrentUserSuccess,(function(){return!0})),Object(u.a)(a,o.a.registerError,(function(){return!1})),Object(u.a)(a,o.a.loginError,(function(){return!1})),Object(u.a)(a,o.a.getCurrentUserError,(function(){return!1})),Object(u.a)(a,o.a.logoutSuccess,(function(){return!1})),a)),f=Object(s.c)({user:b,token:j,isAuthenticated:d}),O=n(11),g=n.n(O),h=n(22),p=n(16),v=n.n(p);v.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com/";var x=function(t){v.a.defaults.headers.common.Authorization="Bearer ".concat(t)},m=function(){v.a.defaults.headers.common.Authorization=""},k={register:function(t){return function(){var e=Object(h.a)(g.a.mark((function e(n){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(o.a.registerRequest()),e.prev=1,e.next=4,v.a.post("/users/signup",t);case 4:r=e.sent,x(r.data.token),n(o.a.registerSuccess(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(o.a.registerError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logOut:function(){return function(){var t=Object(h.a)(g.a.mark((function t(e){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(o.a.logoutRequest()),t.prev=1,t.next=4,v.a.post("/users/logout");case 4:m(),e(o.a.logoutSuccess()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(o.a.logoutError(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},logIn:function(t){return function(){var e=Object(h.a)(g.a.mark((function e(n){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(o.a.loginRequest()),e.prev=1,e.next=4,v.a.post("/users/login",t);case 4:r=e.sent,x(r.data.token),n(o.a.loginSuccess(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(o.a.loginError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var t=Object(h.a)(g.a.mark((function t(e,n){var r,c,a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n(),c=r.auth.token){t.next=3;break}return t.abrupt("return");case 3:return x(c),e(o.a.getCurrentUserRequest()),t.prev=5,t.next=8,v.a.get("/users/current");case 8:a=t.sent,e(o.a.getCurrentUserSuccess(a.data)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e(o.a.getCurrentUserError(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,n){return t.apply(this,arguments)}}()}},y={getIsAuthenticated:function(t){return Boolean(t.auth.token)},getUsername:function(t){return t.auth.user.name}}},30:function(t,e,n){t.exports={div:"Container_div__6LbJa",loading:"Container_loading__1GRAn"}},39:function(t,e,n){"use strict";n.d(e,"b",(function(){return b})),n.d(e,"d",(function(){return O})),n.d(e,"a",(function(){return s.d})),n.d(e,"c",(function(){return y}));var r=n(11),c=n.n(r),a=n(22),o=n(16),u=n.n(o),s=n(6);u.a.defaults.baseURL="http://localhost:4040";var i,l,b={fetchContacts:function(){return function(){var t=Object(a.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(Object(s.i)()),t.prev=1,t.next=4,u.a.get("/contacts");case 4:n=t.sent,r=n.data,e(Object(s.j)(r)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e(Object(s.h)(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},addContact:function(t){var e=t.name,n=t.number;return function(){var t=Object(a.a)(c.a.mark((function t(r){var a,o,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={name:e,number:n},r(Object(s.b)()),t.prev=2,t.next=5,u.a.post("/contacts",a);case 5:o=t.sent,i=o.data,r(Object(s.c)(i)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),r(Object(s.a)(t.t0));case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()},deleteContact:function(t){return function(){var e=Object(a.a)(c.a.mark((function e(n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(Object(s.f)()),e.prev=1,e.next=4,u.a.delete("/contacts/".concat(t));case 4:n(Object(s.g)(t)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),n(Object(s.e)(e.t0));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()}},j=n(26),d=function(t){return t.contacts.items},f=function(t){return t.contacts.filter},O={getIsLoading:function(t){return t.contacts.loading},getAllContacts:d,getFilter:f,filterContacts:Object(j.a)([d,f],(function(t,e){var n=e.toLowerCase();return t.filter((function(t){return t.name.toLowerCase().includes(n)}))}))},g=n(3),h=n(31),p=n(8),v=n(4),x=Object(v.c)([],(i={},Object(g.a)(i,s.j,(function(t,e){return e.payload})),Object(g.a)(i,s.c,(function(t,e){var n=e.payload;return[].concat(Object(h.a)(t),[n])})),Object(g.a)(i,s.g,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),i)),m=Object(v.c)("",Object(g.a)({},s.d,(function(t,e){return e.payload}))),k=Object(v.c)(!1,(l={},Object(g.a)(l,s.i,(function(){return!0})),Object(g.a)(l,s.j,(function(){return!1})),Object(g.a)(l,s.h,(function(){return!1})),Object(g.a)(l,s.b,(function(){return!0})),Object(g.a)(l,s.c,(function(){return!1})),Object(g.a)(l,s.a,(function(){return!1})),Object(g.a)(l,s.f,(function(){return!0})),Object(g.a)(l,s.g,(function(){return!1})),Object(g.a)(l,s.e,(function(){return!1})),l)),y=Object(p.c)({items:x,filter:m,loading:k})},5:function(t,e,n){"use strict";var r=n(4),c=Object(r.b)("auth/registerRequest"),a=Object(r.b)("auth/registerSuccess"),o=Object(r.b)("auth/registerError"),u=Object(r.b)("auth/loginRequest"),s=Object(r.b)("auth/loginSuccess"),i=Object(r.b)("auth/loginError"),l=Object(r.b)("auth/logoutRequest"),b=Object(r.b)("auth/logoutSuccess"),j=Object(r.b)("auth/logoutError"),d=Object(r.b)("auth/getCurrentUserRequest"),f=Object(r.b)("auth/getCurrentUserSuccess"),O=Object(r.b)("auth/getCurrentUserError");e.a={registerRequest:c,registerSuccess:a,registerError:o,logoutRequest:l,logoutSuccess:b,logoutError:j,loginRequest:u,loginSuccess:s,loginError:i,getCurrentUserRequest:d,getCurrentUserSuccess:f,getCurrentUserError:O}},6:function(t,e,n){"use strict";n.d(e,"i",(function(){return c})),n.d(e,"j",(function(){return a})),n.d(e,"h",(function(){return o})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return i})),n.d(e,"f",(function(){return l})),n.d(e,"g",(function(){return b})),n.d(e,"e",(function(){return j})),n.d(e,"d",(function(){return d}));var r=n(4),c=Object(r.b)("contacts/fetchContactsRequest"),a=Object(r.b)("contacts/fetchContactsSuccess"),o=Object(r.b)("contacts/fetchContactsError"),u=Object(r.b)("contacts/addContactRequest"),s=Object(r.b)("contacts/addContactSuccess"),i=Object(r.b)("contacts/addContactError"),l=Object(r.b)("contacts/deleteContactRequest"),b=Object(r.b)("contacts/deleteContactSuccess"),j=Object(r.b)("contacts/deleteContactError"),d=Object(r.b)("contacts/changeFilter")},93:function(t,e,n){"use strict";n.r(e);var r,c=n(0),a=n.n(c),o=n(25),u=n.n(o),s=n(12),i=n(31),l=n(4),b=n(53),j=n.n(b),d=n(23),f=n(54),O=n.n(f),g=n(39),h=n(13),p=n(3),v=n(5),x=n(6),m=function(t,e){return e.payload},k=Object(l.c)(null,(r={},Object(p.a)(r,v.a.registerError,m),Object(p.a)(r,v.a.loginError,m),Object(p.a)(r,v.a.logoutError,m),Object(p.a)(r,v.a.getCurrentUserError,m),Object(p.a)(r,x.h,m),Object(p.a)(r,x.a,m),Object(p.a)(r,x.e,m),r)),y=[].concat(Object(i.a)(Object(l.d)({serializableCheck:{ignoredActions:[d.a,d.f,d.b,d.c,d.d,d.e]}})),[j.a]),C={key:"auth",storage:O.a,whitelist:["token"]},S=Object(l.a)({reducer:{auth:Object(d.g)(C,h.b),contacts:g.c,error:k},middleware:y}),w={store:S,persistor:Object(d.h)(S)},E=n(55),R=(n(88),n(7)),A=n(30),U=n.n(A),q=n(2),L=function(t){var e=t.children;return Object(q.jsx)("div",{className:U.a.div,children:e})},I=n(18),z={home:"/",register:"/register",login:"/login",contacts:"/contacts"},B=n(56),D=n.n(B),F={nav:{display:"flex",alignItems:"center",flexDirection:"row",textAlighn:"center"},link:{display:"flex",fontFamily:"Dancing Script, cursive",fontSize:25,flexDirection:"row",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"},svg:{width:40,height:40}};function T(){var t=Object(s.c)(h.c.getIsAuthenticated);return Object(q.jsxs)("nav",{style:F.nav,children:[Object(q.jsx)(I.b,{to:z.home,exact:!0,style:F.link,activeStyle:F.activeLink,children:Object(q.jsx)(D.a,{style:F.svg})}),t&&Object(q.jsx)(I.b,{to:z.contacts,exact:!0,style:F.link,activeStyle:F.activeLink,children:"Contacts"})]})}var _=n.p+"static/media/default-avatar.0c07a2e4.png",W=n(57),J=n.n(W),N={container:{display:"flex",textAlign:"center",alignItems:"center",fontWeight:700,fontSize:15,color:"#813a5a"},avatar:{borderRadius:"50%",margin:0},name:{marginRight:12,marginLeft:12},svg:{width:30,height:30,display:"block",background:"transparent",color:"#E84A5F",cursor:"pointer"}};function G(){var t=Object(s.b)(),e=Object(c.useCallback)((function(){return t(h.a.logOut())}),[t]),n=Object(s.c)(h.c.getUsername);return Object(q.jsxs)("div",{style:N.container,children:[Object(q.jsx)("img",{src:_,style:N.avatar,alt:"default avatar",width:"32"}),Object(q.jsxs)("span",{style:N.name,children:["Welcome, ",n]}),Object(q.jsx)(J.a,{onClick:e,style:N.svg})]})}var M={link:{fontFamily:"Dancing Script, cursive",fontSize:25,display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},P=function(){return Object(q.jsxs)("div",{children:[Object(q.jsx)(I.b,{to:z.register,exact:!0,style:M.link,activeStyle:M.activeLink,children:"Registration"}),Object(q.jsx)(I.b,{to:z.login,exact:!0,style:M.link,activeStyle:M.activeLink,children:"Login"})]})},H={header:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #2A363B",width:"inherit"}};function K(){var t=Object(s.c)(h.c.getIsAuthenticated);return Object(q.jsxs)("header",{style:H.header,children:[Object(q.jsx)(T,{}),t?Object(q.jsx)(G,{}):Object(q.jsx)(P,{})]})}var Q=n(27),V=n(32);function X(t){var e=t.redirectTo,n=t.children,r=Object(V.a)(t,["redirectTo","children"]),c=Object(s.c)(h.c.getIsAuthenticated);return Object(q.jsx)(R.b,Object(Q.a)(Object(Q.a)({},r),{},{children:c?n:Object(q.jsx)(R.a,{to:e})}))}function Y(t){var e=t.redirectTo,n=t.children,r=Object(V.a)(t,["redirectTo","children"]),c=Object(s.c)(h.c.getIsAuthenticated);return Object(q.jsx)(R.b,Object(Q.a)(Object(Q.a)({},r),{},{children:c&&r.restricted?Object(q.jsx)(R.a,{to:e}):n}))}var Z=Object(c.lazy)((function(){return n.e(5).then(n.bind(null,125))})),$=Object(c.lazy)((function(){return n.e(7).then(n.bind(null,126))})),tt=Object(c.lazy)((function(){return n.e(6).then(n.bind(null,127))})),et=Object(c.lazy)((function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,128))}));function nt(){var t=Object(s.b)();return Object(c.useEffect)((function(){t(h.a.getCurrentUser())}),[t]),Object(q.jsxs)(L,{children:[Object(q.jsx)(K,{}),Object(q.jsx)(c.Suspense,{fallback:Object(q.jsx)("p",{className:U.a.loading,children:"Loading..."}),children:Object(q.jsxs)(R.d,{children:[Object(q.jsxs)(Y,{exact:!0,path:z.home,children:[" ",Object(q.jsx)(Z,{})," "]}),Object(q.jsx)(Y,{path:z.register,restricted:!0,redirectTo:z.contacts,component:$}),Object(q.jsx)(Y,{path:z.login,restricted:!0,redirectTo:z.contacts,children:Object(q.jsx)(tt,{})}),Object(q.jsx)(X,{path:z.contacts,redirectTo:z.login,children:Object(q.jsx)(et,{})})]})})]})}u.a.render(Object(q.jsx)(a.a.StrictMode,{children:Object(q.jsx)(s.a,{store:w.store,children:Object(q.jsx)(E.a,{loading:null,persistor:w.persistor,children:Object(q.jsx)(I.a,{children:Object(q.jsx)(nt,{})})})})}),document.getElementById("root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.0245efc4.chunk.js.map